---
title:  "ä½¿ç”¨Jekyllè¿œç¨‹åˆ¶ä½œä¸ªäººGithub Pages"
subtitle: "åˆã‚ã¾ã—ã¦"
layout: "post"
date:   2020-03-21 13:15:38 +0800
categories:
  - blog
---

## Requirements

è¿™é‡Œéœ€è¦å®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š

- ruby>2.4
  - rvm
  - bundle

## Install requirements

SSHç™»å½•åˆ°æœåŠ¡å™¨ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… rubyï¼š

```shell
sudo apt-get install ruby
# æ£€æŸ¥ ruby ç‰ˆæœ¬
ruby -v
```

è€ƒè™‘åˆ°å›½å†…ä½¿ç”¨é»˜è®¤gemsæºçš„é€Ÿåº¦å¯èƒ½è¾ƒæ…¢ï¼Œå› æ­¤ä½¿ç”¨[æ¸…åå¤§å­¦](https://mirrors.tuna.tsinghua.edu.cn/help/rubygems/)çš„é•œåƒæºï¼š
```
# æ·»åŠ  TUNA æºå¹¶ç§»é™¤é»˜è®¤æº
gem sources --add https://mirrors.tuna.tsinghua.edu.cn/rubygems/ --remove https://rubygems.org/
# åˆ—å‡ºå·²æœ‰æº
gem sources -l
# åº”è¯¥åªæœ‰ TUNA ä¸€ä¸ª
```
éœ€è¦æä¾› root æƒé™å®‰è£… Jekyll å’Œ bundlerï¼š
```shell
sudo gem install jekyll bundler
```

å¦‚æœåœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­é‡åˆ°æç¤º `can't find header files for ruby at /usr/lib/ruby/ruby.h` çš„é—®é¢˜ï¼Œåˆ™éœ€è¦å®‰è£…å¯¹åº”çš„å¼€å‘è€…å·¥å…·ã€‚å½“å‰ç‰ˆæœ¬æ˜¯ `ruby 2.5.1p57`ï¼Œå¼€å‘è€…å·¥å…·çš„ç‰ˆæœ¬(`ruby2.5-dev`)è¦ä¸ä¹‹å¯¹åº”ï¼š
```
sudo apt-get install ruby2.5-dev
```

## Create a project

ä¾èµ–éƒ½å®‰è£…å®Œæˆä¹‹åå°±å¯ä»¥å¼€å§‹ä½¿ç”¨ Jekyll åˆ¶ä½œä¸ªäººé¡µäº†ã€‚é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ª Jekyll æ¨¡æ¿ï¼š

```shell
jekyll new kayoch1n.github.io
```
`jekyll new` åé¢çš„å‚æ•°æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹å¿…é¡»æ˜¯ç©ºçš„ï¼Œå¦åˆ™æŠ¥é”™å¹¶ä¸”åˆ›å»ºå¤±è´¥ã€‚åˆ›å»ºä¹‹åè¿›å…¥åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆå§‹åŒ–gitä»“åº“ï¼š
```shell
cd kayoch1n.github.io
git init
```
è¿™ä¸ªæ—¶å€™çš„ç›®å½•ç»“æ„åº”è¯¥é•¿è¿™æ ·ï¼š

![project structure]({{ site.url }}/assets/2020-03-21-gh-pages.png)

ç®€å•åœ°è§£é‡Šä¸€ä¸‹è¿™ä¸ªç›®å½•ï¼š

- `_posts` å­˜æ”¾æ–‡ç« ã€‚ç”¨æˆ·ä½¿ç”¨markdownç¼–å†™çš„æ–‡æ¡£éœ€è¦å­˜æ”¾åœ¨è¿™ä¸ªç›®å½•æ‰èƒ½è¢«Jekyllæ£€æµ‹å¾—åˆ°ï¼›
- `_site` åœ¨è°ƒè¯•çš„æ—¶å€™å­˜æ”¾ç€bundleå‘½ä»¤æ‰“åŒ…æ„å»ºçš„é™æ€htmlèµ„æºï¼Œå¿½ç•¥å³å¯
- `_config.yml` åŒ…å«Jekyllé¡¹ç›®çš„é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚urlå‰ç¼€(baseurl)å’Œä¸»é¢˜(theme)ç­‰ç­‰ã€‚ã€‚

## Add your first post

åœ¨ `_post` ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¹¶éµå¾ªå‘½åæ ¼å¼ï¼š`YYYY-MM-DD-YOUR-FANCY-POST.markdown`

ä½¿ç”¨ Jekyll åˆ›å»ºçš„é¡¹ç›®ä¼šè‡ªå¸¦ä¸€ä¸ªä»‹ç»æ€§çš„markdownæ–‡æ¡£ï¼Œç”¨æˆ·å¯ä»¥åœ¨è¿™ä¸ªæ–‡æ¡£çš„åŸºç¡€ä¸Šç…§è‘«èŠ¦ç”»ç“¢ã€‚è¿™ä¸ªmarkdownçš„å¼€å¤´æœ‰ä¸€æ®µå½¢å¼å¦‚ä¸‹çš„yamlï¼š
```yaml
---
layout: post
title:  "ä½¿ç”¨Jekyllåˆ¶ä½œä¸ªäººGithub Pages"
date:   2020-03-21 13:15:38 +0800
categories: Github 
---
```
æ¥ä¸‹æ¥å°±å¯ä»¥æŒ‰ç…§markdownçš„è¯­æ³•å†™è‡ªå·±çš„æ–‡ç« äº†ã€‚å…³äºmarkdownçš„è¯­æ³•ï¼Œgayhubæœ‰ä¸€ç¯‡ç®€å•æ˜“æ‡‚çš„ä»‹ç»åœ¨[è¿™é‡Œ](https://guides.github.com/pdfs/markdown-cheatsheet-online.pdf)ã€‚

## Debug (optional)

å‡å¦‚ç”¨æˆ·å¯¹è‡ªå·±å†™çš„æ–‡ç« å……æ»¡ä¿¡å¿ƒï¼Œé‚£ä¹ˆè¿™ä¸€ä¸ªæ­¥éª¤ä¸æ˜¯å¿…é¡»çš„ã€‚ä½†æ˜¯å¯¹äºåƒæˆ‘è¿™ç§å·å·å†™bugçš„coderæ¥è¯´ï¼Œä¸ç®€å•è°ƒè¯•ä¸€ä¸‹æ˜¯ä¸èƒ½æ”¾å¿ƒpushçš„ã€‚é€šè¿‡`bundle`å‘½ä»¤æ‰“åŒ…æ„å»ºå¹¶åœ¨æœ¬åœ°æ‹‰èµ·ä¸€ä¸ªHTTPæœåŠ¡ï¼š

```shell
bundle exec jekyll serve
```

ç”¨æˆ·å¯ä»¥è§‚å¯Ÿæ„å»ºçš„æ ‡å‡†è¾“å‡ºè§‚å¯Ÿæ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ï¼Œæ²¡æœ‰é”™è¯¯ä¿¡æ¯å°±å¯ä»¥æ”¾å¿ƒæäº¤äº†ã€‚è¿™ä¸ªHTTPæœåŠ¡é»˜è®¤ç›‘å¬ `http://127.0.0.1:4000/`ï¼ŒæŒ‰ä¸‹ ctrl+c åœæ­¢æœåŠ¡ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒJekyllæ˜¯å¯ä»¥å®æ—¶æ„å»ºçš„ï¼šåªè¦ç”¨æˆ·ä¸åœæ­¢è¿™ä¸ªæœåŠ¡ï¼Œä»»ä½•å³æ—¶çš„ä¿®æ”¹éƒ½ä¼šå‡ºå‘æ‰“åŒ…æ„å»ºã€‚ä¸æ­¤åŒæ—¶ï¼Œç”¨æˆ·å¯ä»¥åœ¨å¦ä¸€ä¸ªçª—å£ä½¿ç”¨ä¸‡èƒ½çš„ `curl` éªŒè¯ä¸€ä¸‹ã€‚

## Publish

æ–‡ç« å†™å¥½äº†ï¼Œæ¥ä¸‹æ¥å°±è¦æŠŠæ–‡ç« å‘å¸ƒåˆ°githubä¸Šäº†ï¼Ÿå¯¹äºç¬¬ä¸€æ¬¡ä½¿ç”¨gitçš„ç”¨æˆ·è€Œè¨€ï¼Œéœ€è¦å…ˆé…ç½®gitçš„ç”¨æˆ·åå’Œé‚®ä»¶ï¼Œè¿™ä¸ªæ­¥éª¤æ˜¯ä¸€æ¬¡æ€§çš„ï¼š

```
git config --global user.name kayoch1n
git config --global user.email koizumihanayo@protonmail.com
```

æ¯æ¬¡å†™å¥½æ–‡ç« äº†ï¼Œéƒ½éœ€è¦å…ˆæŠŠæ›´æ”¹æäº¤åˆ°æœ¬åœ°gitä»“åº“ï¼ˆé»˜è®¤æ˜¯masteråˆ†æ”¯ï¼‰ï¼š

```shell
# æš‚å­˜æ‰€æœ‰æ›´æ”¹(STAGED)
git add .
# æäº¤å·²æš‚å­˜çš„æ›´æ”¹
git commit -m "Add my first posts."
```

åœ¨[github]()ä¸Šåˆ›å»ºä¸€ä¸ªè¿œç¨‹ä»“åº“ã€‚å¦‚æœæ²¡æœ‰è‡ªå·±åŸŸåï¼Œåˆ™éœ€è¦å°†ä»“åº“å‘½åä¸º`YOUR_USERNAME.github.io`ã€‚åˆ›å»ºæˆåŠŸä¹‹åï¼Œå°†è¿œç¨‹ä»“åº“çš„HTTPS URLæ·»åŠ ä½œä¸ºæœ¬åœ°ä»“åº“çš„originï¼Œç„¶åæ¨é€æ›´æ”¹ï¼š

```
# è·Ÿè¸ªä»“åº“ï¼ˆä¸€æ¬¡æ€§ï¼‰
git remote add origin https://github.com/kayoch1n/kayoch1n.github.io.git
# æ¨é€æ›´æ”¹
git push origin master
```

æ¨é€å®Œæˆä¹‹åï¼Œå°±å¯ä»¥åˆ° https://kayoch1n.github.io çœ‹åˆ°ä¸ªäººä¸»é¡µäº†ã€‚å…³äºå¦‚ä½•ä½¿ç”¨ utterances æ·»åŠ issueè¯„è®ºåŠŸèƒ½ï¼Œå¯ä»¥å‚è€ƒ[ğŸ‘‰å®˜æ–¹æŒ‡å¼•](https://utteranc.es/)
